<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>圣道云抽奖活动</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <style>
        /* 样式保持不变 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', 'Noto Sans SC', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
            position: relative;
        }
        
        .header {
            text-align: center;
            margin: 20px 0 30px;
            width: 100%;
            position: relative;
        }
        
        .header h1 {
            font-size: 2.2rem;
            color: #1a73e8;
            font-weight: 500;
            margin-bottom: 8px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .header p {
            color: #5f6368;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.05);
            padding: 30px;
            width: 100%;
            max-width: 500px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .result-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            padding: 20px;
            border-radius: 12px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 1px solid #e0e0e0;
        }
        
        .result-placeholder {
            color: #9e9e9e;
            font-size: 1.2rem;
        }
        
        .result-content {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .prize-name {
            font-size: 1.8rem;
            font-weight: 500;
            color: #1a73e8;
            animation: fadeIn 0.5s ease;
        }
        
        .prize-desc {
            font-size: 1.1rem;
            color: #5f6368;
            max-width: 80%;
            line-height: 1.5;
        }
        
        .prize-icon {
            font-size: 4rem;
            color: #1a73e8;
            margin-bottom: 10px;
        }
        
        .button-container {
            display: flex;
            justify-content: center;
            margin: 25px 0;
        }
        
        .draw-button {
            background: #1a73e8;
            color: white;
            border: none;
            border-radius: 24px;
            padding: 16px 48px;
            font-size: 1.2rem;
            font-weight: 500;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(26, 115, 232, 0.4);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .draw-button:hover {
            background: #1669d6;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(26, 115, 232, 0.4);
        }
        
        .draw-button:active {
            transform: translateY(1px);
            box-shadow: 0 1px 3px rgba(26, 115, 232, 0.4);
        }
        
        .draw-button:disabled {
            background: #9e9e9e;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .prizes-section {
            width: 100%;
            max-width: 800px;
        }
        
        .section-title {
            font-size: 1.5rem;
            color: #1a73e8;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e8eaed;
            font-weight: 500;
        }
        
        .prizes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .prize-item {
            background: white;
            border-radius: 12px;
            padding: 20px 15px;
            text-align: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            transition: all 0.2s ease;
            border: 1px solid #f1f3f4;
            position: relative;
            overflow: hidden;
        }
        
        .prize-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.08);
            border-color: #e8eaed;
        }
        
        .prize-item-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #1a73e8;
        }
        
        .prize-item-name {
            font-weight: 500;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .footer {
            margin-top: 40px;
            text-align: center;
            padding: 20px;
            color: #5f6368;
            width: 100%;
            border-top: 1px solid #e8eaed;
        }
        
        .friend-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #1a73e8;
            text-decoration: none;
            font-weight: 500;
            padding: 12px 24px;
            background: rgba(26, 115, 232, 0.1);
            border-radius: 24px;
            margin-top: 15px;
            transition: all 0.2s ease;
        }
        
        .friend-link:hover {
            background: rgba(26, 115, 232, 0.15);
            transform: translateY(-2px);
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .spinner {
            display: none;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(26, 115, 232, 0.2);
            border-top: 4px solid #1a73e8;
            border-radius: 50%;
            animation: rotate 1s linear infinite;
            margin: 20px auto;
        }
        
        .highlight {
            background: linear-gradient(120deg, #e0f2ff 0%, #d1e7ff 100%);
            border: 1px solid #bbdefb;
            box-shadow: 0 4px 15px rgba(26, 115, 232, 0.15);
        }
        
        .stats-container {
            display: flex;
            justify-content: center;
            margin: 20px auto 30px;
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.05);
            padding: 20px;
        }
        
        .stats-box {
            width: 100%;
            text-align: center;
            font-size: 0.9rem;
            color: #5f6368;
        }
        
        .stats-label {
            font-weight: 500;
            margin-bottom: 15px;
            color: #1a73e8;
            font-size: 1.2rem;
        }
        
        .stats-image {
            width: 100%;
            max-width: 200px;
            height: auto;
            margin: 0 auto 15px;
            display: block;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
        }
        
        .stats-number {
            font-size: 1.8rem;
            font-weight: bold;
            color: #1a73e8;
            margin: 10px 0;
        }
        
        .limit-info {
            text-align: center;
            color: #5f6368;
            margin-top: 15px;
            font-size: 0.95rem;
        }
        
        .limit-count {
            font-weight: bold;
            color: #1a73e8;
        }
        
        .limit-warning {
            color: #f44336;
            font-weight: 500;
            margin-top: 10px;
            display: none;
        }
        
        /* 卡密入口按钮 */
        .card-key-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #1a73e8;
            color: white;
            border: none;
            border-radius: 24px;
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(26, 115, 232, 0.4);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 100;
        }
        
        .card-key-btn:hover {
            background: #1669d6;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(26, 115, 232, 0.4);
        }
        
        /* VIP徽章 */
        .vip-badge {
            position: absolute;
            top: 20px;
            left: 20px;
            background: linear-gradient(135deg, #ffd700 0%, #ffb700 100%);
            color: #333;
            padding: 6px 12px;
            border-radius: 24px;
            font-weight: bold;
            font-size: 0.9rem;
            display: none;
            align-items: center;
            gap: 5px;
            z-index: 100;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .vip-badge:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(255, 183, 0, 0.3);
        }
        
        /* 卡密模态框 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 500px;
            padding: 30px;
            position: relative;
            animation: modalIn 0.3s ease;
        }
        
        @keyframes modalIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #5f6368;
            background: none;
            border: none;
        }
        
        .modal-title {
            font-size: 1.8rem;
            color: #1a73e8;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #1a73e8;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        
        .input-group input:focus {
            border-color: #1a73e8;
            outline: none;
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
        }
        
        .submit-btn {
            background: #1a73e8;
            color: white;
            border: none;
            border-radius: 24px;
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(26, 115, 232, 0.4);
            transition: all 0.2s ease;
            display: block;
            width: 100%;
            margin: 20px 0;
        }
        
        .submit-btn:hover {
            background: #1669d6;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(26, 115, 232, 0.4);
        }
        
        .contact-info {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #1a73e8;
        }
        
        .vip-features {
            background: linear-gradient(135deg, #e0f2ff 0%, #d1e7ff 100%);
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
            border: 1px solid #bbdefb;
        }
        
        .vip-title {
            font-size: 1.5rem;
            color: #1a73e8;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 500;
        }
        
        .vip-feature {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.7);
        }
        
        .vip-feature i {
            color: #1a73e8;
            font-size: 1.5rem;
            min-width: 30px;
        }
        
        .vip-feature-text {
            font-size: 1.05rem;
            color: #333;
        }
        
        .feature-badge {
            background: linear-gradient(135deg, #ffd700 0%, #ffb700 100%);
            color: #333;
            padding: 4px 12px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 0.9rem;
            margin-left: 10px;
        }
        
        /* 全局提示框 */
        .result-alert {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border-radius: 12px;
            padding: 15px 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            display: none;
            align-items: center;
            gap: 15px;
            z-index: 2000;
            max-width: 90%;
        }
        
        .result-alert.success {
            border-left: 5px solid #4CAF50;
        }
        
        .result-alert.fail {
            border-left: 5px solid #f44336;
        }
        
        .alert-icon {
            font-size: 2.2rem;
        }
        
        .success .alert-icon {
            color: #4CAF50;
        }
        
        .fail .alert-icon {
            color: #f44336;
        }
        
        .alert-content {
            display: flex;
            flex-direction: column;
        }
        
        .alert-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 4px;
        }
        
        .alert-msg {
            font-size: 0.95rem;
        }
        
        @keyframes pop {
            0% { transform: translate(-50%, -20px); opacity: 0; }
            100% { transform: translate(-50%, 0); opacity: 1; }
        }
        
        @keyframes shake {
            0% { transform: translate(-50%, 0); }
            20% { transform: translate(-52%, 0); }
            40% { transform: translate(-48%, 0); }
            60% { transform: translate(-52%, 0); }
            80% { transform: translate(-48%, 0); }
            100% { transform: translate(-50%, 0); }
        }
        
        /* VIP账户信息模态框 */
        .vip-account-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .vip-account-content {
            background: linear-gradient(135deg, #fff9c4 0%, #fff59d 100%);
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 500px;
            padding: 30px;
            position: relative;
            animation: modalIn 0.3s ease;
            border: 2px solid #ffd600;
        }
        
        .vip-account-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #ffd600;
        }
        
        .vip-account-title {
            font-size: 1.8rem;
            color: #ff6f00;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .vip-account-id {
            font-size: 1.3rem;
            color: #5d4037;
            font-family: monospace;
            letter-spacing: 1px;
        }
        
        .account-info {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }
        
        .info-row:last-child {
            border-bottom: none;
        }
        
        .info-label {
            font-weight: 500;
            color: #5f6368;
        }
        
        .info-value {
            font-weight: bold;
            color: #1a73e8;
        }
        
        .vip-benefits {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .benefit-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            background: rgba(255, 248, 225, 0.7);
        }
        
        .benefit-item i {
            color: #ff6f00;
            font-size: 1.8rem;
            min-width: 30px;
        }
        
        .benefit-text {
            font-size: 1.05rem;
            color: #333;
        }
        
        .vip-status {
            display: inline-block;
            padding: 5px 15px;
            background: #4CAF50;
            color: white;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 15px;
        }
        
        @media (max-width: 600px) {
            .card {
                padding: 20px;
            }
            
            .prizes-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .prize-name {
                font-size: 1.5rem;
            }
            
            .card-key-btn {
                position: relative;
                top: auto;
                right: auto;
                margin: 10px auto;
                display: block;
            }
            
            .vip-badge {
                position: relative;
                top: auto;
                left: auto;
                margin: 10px auto;
                display: block;
            }
            
            .stats-image {
                max-width: 160px;
            }
            
            .vip-account-content {
                padding: 20px;
            }
            
            .vip-account-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- VIP徽章 -->
    <div class="vip-badge" id="vipBadge">
        <i class="material-icons">star</i>
        <span>VIP会员</span>
    </div>
    
    <!-- 卡密入口按钮 -->
    <button class="card-key-btn" id="cardKeyBtn">
        <i class="material-icons">vpn_key</i>
        <span>卡密兑换</span>
    </button>
    
    <!-- 全局提示框 -->
    <div class="result-alert" id="alertBox">
        <i class="material-icons alert-icon" id="alertIcon">info</i>
        <div class="alert-content">
            <div class="alert-title" id="alertTitle">提示</div>
            <div class="alert-msg" id="alertMsg">消息内容</div>
        </div>
    </div>
    
    <div class="header">
        <h1>圣道云幸运抽奖</h1>
        <p>参与抽奖，赢取云服务器、CDN、云电脑等丰厚奖品及优惠券</p>
    </div>
    
    <div class="card">
        <div class="result-container">
            <div class="result-placeholder" id="resultPlaceholder">
                <i class="material-icons" style="font-size: 3rem; color: #9e9e9e; margin-bottom: 15px;">card_giftcard</i>
                <p>点击下方按钮开始抽奖</p>
            </div>
            <div class="result-content" id="resultContent">
                <i class="material-icons prize-icon">card_giftcard</i>
                <div class="prize-name" id="prizeName"></div>
                <div class="prize-desc" id="prizeDesc"></div>
            </div>
            <div class="spinner" id="spinner"></div>
        </div>
        
        <div class="button-container">
            <button class="draw-button" id="drawButton">
                <i class="material-icons">auto_awesome</i>
                <span>开始抽奖</span>
            </button>
        </div>
        
        <div class="limit-info">
            <p>每个IP每天限抽 <span class="limit-count" id="dailyLimit">3</span> 次</p>
            <p>今日剩余次数: <span class="limit-count" id="remainingCount">3</span></p>
            <p class="limit-warning" id="limitWarning">今日抽奖次数已达上限，请明天再来！</p>
        </div>
    </div>
    
    <!-- 统计区域 -->
    <div class="stats-container">
        <div class="stats-box">
            <div class="stats-label">活动参与统计</div>
            <img src="https://w.saobby.com/w/yp2kl565" alt="活动统计" class="stats-image">
            <div class="stats-number" id="participantsCount">18,476</div>
            <div>人已参与</div>
        </div>
    </div>
    
    <div class="prizes-section">
        <h2 class="section-title">抽奖奖品</h2>
        <div class="prizes-grid" id="prizesGrid">
            <!-- 奖品列表将动态加载 -->
        </div>
    </div>
    
    <div class="footer">
        <p>© 2023 圣道云抽奖活动 | 最终解释权归圣道云所有</p>
        <a href="https://shengdaoyun.cn" class="friend-link" target="_blank">
            <i class="material-icons">cloud</i>
            <span>访问圣道云官网 shengdaoyun.cn</span>
        </a>
    </div>
    
    <!-- 卡密兑换模态框 -->
    <div class="modal-overlay" id="cardModal">
        <div class="modal-content">
            <button class="close-modal" id="closeModal">&times;</button>
            <h2 class="modal-title">卡密兑换VIP</h2>
            
            <div class="input-group">
                <label for="cardInput">请输入您的卡密：</label>
                <input type="text" id="cardInput" placeholder="输入卡密（如：VIP-1234-5678-ABCD）">
            </div>
            
            <button class="submit-btn" id="submitCard">
                <i class="material-icons">check_circle</i>
                <span>兑换VIP</span>
            </button>
            
            <div class="contact-info">
                <p>若需换取卡密，请咨询：</p>
                <p><strong>QQ：320237867</strong></p>
                <p><strong>哔哩哔哩：鸭先知--沉默</strong></p>
            </div>
            
            <div class="vip-features">
                <h3 class="vip-title">VIP会员特权</h3>
                
                <div class="vip-feature">
                    <i class="material-icons">autorenew</i>
                    <span class="vip-feature-text">每日抽奖次数为6次<span class="feature-badge">特权</span></span>
                </div>
                
                <div class="vip-feature">
                    <i class="material-icons">card_giftcard</i>
                    <span class="vip-feature-text">不定期优惠券赠送<span class="feature-badge">专属</span></span>
                </div>
                
                <div class="vip-feature">
                    <i class="material-icons">star</i>
                    <span class="vip-feature-text">享受更多福利和优先参与活动<span class="feature-badge">尊享</span></span>
                </div>
                
                <div class="vip-feature">
                    <i class="material-icons">headset_mic</i>
                    <span class="vip-feature-text">专业的售后保障和优先支持<span class="feature-badge">VIP服务</span></span>
                </div>
                
                <div class="vip-feature">
                    <i class="material-icons">redeem</i>
                    <span class="vip-feature-text">更多产品免费赠送和试用<span class="feature-badge">专享</span></span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- VIP账户信息模态框 -->
    <div class="vip-account-modal" id="vipAccountModal">
        <div class="vip-account-content">
            <button class="close-modal" id="closeAccountModal">&times;</button>
            
            <div class="vip-account-header">
                <div class="vip-account-title">VIP会员账户信息</div>
                <div class="vip-account-id" id="vipAccountId">VIP-USER-0000</div>
                <div class="vip-status">状态：有效</div>
            </div>
            
            <div class="account-info">
                <div class="info-row">
                    <span class="info-label">账户类型：</span>
                    <span class="info-value">黄金VIP会员</span>
                </div>
                <div class="info-row">
                    <span class="info-label">开通日期：</span>
                    <span class="info-value" id="vipStartDate">2023-10-01</span>
                </div>
                <div class="info-row">
                    <span class="info-label">到期日期：</span>
                    <span class="info-value" id="vipEndDate">2024-10-01</span>
                </div>
                <div class="info-row">
                    <span class="info-label">每日抽奖次数：</span>
                    <span class="info-value">6次</span>
                </div>
                <div class="info-row">
                    <span class="info-label">专属客服：</span>
                    <span class="info-value">VIP专属客服经理</span>
                </div>
            </div>
            
            <div class="vip-benefits">
                <h3 class="vip-title">专属权益</h3>
                
                <div class="benefit-item">
                    <i class="material-icons">auto_awesome</i>
                    <span class="benefit-text">中奖概率提升20%</span>
                </div>
                
                <div class="benefit-item">
                    <i class="material-icons">card_giftcard</i>
                    <span class="benefit-text">每月赠送专属优惠券</span>
                </div>
                
                <div class="benefit-item">
                    <i class="material-icons">support_agent</i>
                    <span class="benefit-text">24小时VIP专属客服支持</span>
                </div>
                
                <div class="benefit-item">
                    <i class="material-icons">event_available</i>
                    <span class="benefit-text">优先参与新品体验活动</span>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const drawButton = document.getElementById('drawButton');
            const resultPlaceholder = document.getElementById('resultPlaceholder');
            const resultContent = document.getElementById('resultContent');
            const prizeName = document.getElementById('prizeName');
            const prizeDesc = document.getElementById('prizeDesc');
            const spinner = document.getElementById('spinner');
            const remainingCount = document.getElementById('remainingCount');
            const limitWarning = document.getElementById('limitWarning');
            const dailyLimitSpan = document.getElementById('dailyLimit');
            const participantsCount = document.getElementById('participantsCount');
            const cardKeyBtn = document.getElementById('cardKeyBtn');
            const cardModal = document.getElementById('cardModal');
            const closeModalBtn = document.getElementById('closeModal');
            const submitCard = document.getElementById('submitCard');
            const cardInput = document.getElementById('cardInput');
            const alertBox = document.getElementById('alertBox');
            const alertIcon = document.getElementById('alertIcon');
            const alertTitle = document.getElementById('alertTitle');
            const alertMsg = document.getElementById('alertMsg');
            const vipBadge = document.getElementById('vipBadge');
            const vipAccountModal = document.getElementById('vipAccountModal');
            const closeAccountModalBtn = document.getElementById('closeAccountModal');
            const vipAccountId = document.getElementById('vipAccountId');
            const vipStartDate = document.getElementById('vipStartDate');
            const vipEndDate = document.getElementById('vipEndDate');
            const prizesGrid = document.getElementById('prizesGrid');
            
            // 从localStorage加载奖品
            let prizes = JSON.parse(localStorage.getItem('sdy_prizes')) || [];
            
            // 如果没有奖品，使用默认奖品
            if (prizes.length === 0) {
                prizes = [
                    { 
                        name: "云电脑", 
                        probability: 0.001, 
                        desc: "高性能云电脑使用权30天",
                        icon: "desktop_windows"
                    },
                    { 
                        name: "虚拟主机", 
                        probability: 1, 
                        desc: "1个月虚拟主机基础版服务",
                        icon: "storage"
                    },
                    { 
                        name: "谢谢参与", 
                        probability: 86, 
                        desc: "感谢参与，下次好运",
                        icon: "sentiment_dissatisfied"
                    },
                    { 
                        name: "圣道云八折优惠券", 
                        probability: 3, 
                        desc: "圣道云全产品八折优惠券",
                        icon: "confirmation_number"
                    },
                    { 
                        name: "建站服务八折优惠券", 
                        probability: 5, 
                        desc: "建站服务八折优惠券",
                        icon: "confirmation_number"
                    },
                    { 
                        name: "建站服务七折优惠券", 
                        probability: 4, 
                        desc: "建站服务七折优惠券",
                        icon: "confirmation_number"
                    },
                    { 
                        name: "建站服务六折优惠券", 
                        probability: 2, 
                        desc: "建站服务六折优惠券",
                        icon: "confirmation_number"
                    }
                ];
                
                // 保存默认奖品
                localStorage.setItem('sdy_prizes', JSON.stringify(prizes));
            }
            
            // 渲染奖品列表
            function renderPrizes() {
                prizesGrid.innerHTML = '';
                
                prizes.forEach(prize => {
                    const prizeItem = document.createElement('div');
                    prizeItem.className = 'prize-item';
                    
                    // 云电脑奖品高亮显示
                    if (prize.name === "云电脑") {
                        prizeItem.classList.add('highlight');
                    }
                    
                    prizeItem.innerHTML = `
                        <i class="material-icons prize-item-icon">${prize.icon}</i>
                        <div class="prize-item-name">${prize.name}</div>
                    `;
                    
                    prizesGrid.appendChild(prizeItem);
                });
            }
            
            // 计算总概率
            const totalProbability = prizes.reduce((sum, prize) => sum + prize.probability, 0);
            
            // 统计参与人数
            let participants = 18476;
            
            // IP限制功能
            let dailyLimit = 3;
            let remainingDraws = dailyLimit;
            let vipMode = false;
            
            // ============ 卡密兑换函数 ============
            function openCardModal() { 
                cardModal.style.display = 'flex'; 
                cardInput.value = '';
            }
            
            function closeCardModal() { 
                cardModal.style.display = 'none'; 
            }
            
            function openVipAccount() {
                vipAccountModal.style.display = 'flex';
            }
            
            function closeVipAccount() {
                vipAccountModal.style.display = 'none';
            }
            
            function generateVipAccount() {
                const prefix = "VIP-USER-";
                const chars = '0123456789';
                let accountId = prefix;
                
                for (let i = 0; i < 4; i++) {
                    accountId += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                
                return accountId;
            }
            
            function getVipDates() {
                const startDate = new Date();
                const endDate = new Date();
                endDate.setFullYear(startDate.getFullYear() + 1);
                
                return {
                    start: formatDate(startDate),
                    end: formatDate(endDate)
                };
            }
            
            function formatDate(date) {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            }
            
            function redeemCard() {
                const val = cardInput.value.trim();
                if (!val) return showAlert('fail', '请输入卡密！', '卡密不能为空');
                
                // 获取卡密列表
                const cards = JSON.parse(localStorage.getItem('sdy_cards')) || [];
                const usedCards = JSON.parse(localStorage.getItem('usedCardKeys')) || [];
                
                // 检查卡密是否有效
                const validCard = cards.find(card => card.key === val);
                
                if (validCard) {
                    // 检查卡密是否已使用
                    if (usedCards.includes(val)) {
                        showAlert('fail', '兑换失败', '该卡密已被使用');
                    } else {
                        // 记录已使用的卡密
                        usedCards.push(val);
                        localStorage.setItem('usedCardKeys', JSON.stringify(usedCards));
                        
                        // 设置为VIP
                        localStorage.setItem('vipStatus', 'true');
                        vipMode = true;
                        
                        // 生成VIP账户信息
                        const accountId = generateVipAccount();
                        const dates = getVipDates();
                        localStorage.setItem('vipAccount', JSON.stringify({
                            id: accountId,
                            startDate: dates.start,
                            endDate: dates.end
                        }));
                        
                        // 显示VIP徽章
                        vipBadge.style.display = 'flex';
                        
                        // 更新抽奖次数
                        dailyLimit = 6;
                        dailyLimitSpan.textContent = '6';
                        remainingDraws = dailyLimit - getTodayDrawCount();
                        remainingCount.textContent = remainingDraws;
                        
                        if (remainingDraws > 0) {
                            drawButton.disabled = false;
                            limitWarning.style.display = 'none';
                        }
                        
                        showAlert('success', '兑换成功！', '您已成为 VIP，每日抽奖次数增加至6次！');
                        closeCardModal();
                    }
                } else {
                    showAlert('fail', '兑换失败', '卡密无效或已过期');
                }
            }
            
            function showAlert(type, title, msg) {
                alertBox.className = 'result-alert ' + type;
                alertIcon.textContent = type === 'success' ? 'check_circle' : 'cancel';
                alertTitle.textContent = title;
                alertMsg.textContent = msg;
                alertBox.style.display = 'flex';
                alertBox.style.animation = type === 'success' ? 'pop .5s' : 'shake .4s';
                
                setTimeout(() => { 
                    alertBox.style.display = 'none'; 
                }, 2500);
            }
            
            // 获取今日抽奖次数
            function getTodayDrawCount() {
                const today = new Date().toDateString();
                const drawHistory = JSON.parse(localStorage.getItem('drawHistory')) || {};
                
                if (drawHistory.date === today) {
                    return drawHistory.count;
                }
                return 0;
            }
            
            // 显示VIP账户信息
            function showVipAccount() {
                const accountData = JSON.parse(localStorage.getItem('vipAccount')) || {};
                
                if (accountData.id) {
                    vipAccountId.textContent = accountData.id;
                    vipStartDate.textContent = accountData.startDate || '2023-10-01';
                    vipEndDate.textContent = accountData.endDate || '2024-10-01';
                    openVipAccount();
                } else {
                    showAlert('fail', '账户信息', '未找到您的VIP账户信息');
                }
            }
            
            // ============ 初始化函数 ============
            function initVIP() {
                // 检查是否是VIP
                if (localStorage.getItem('vipStatus') === 'true') {
                    vipMode = true;
                    vipBadge.style.display = 'flex';
                    dailyLimit = 6;
                    dailyLimitSpan.textContent = '6';
                }
            }
            
            // 检查本地存储中是否有抽奖记录
            function loadDrawHistory() {
                const today = new Date().toDateString();
                const drawHistory = JSON.parse(localStorage.getItem('drawHistory')) || {};
                
                if (drawHistory.date === today) {
                    const todayCount = drawHistory.count;
                    remainingDraws = dailyLimit - todayCount;
                    if (remainingDraws <= 0) {
                        remainingDraws = 0;
                        drawButton.disabled = true;
                        limitWarning.style.display = 'block';
                    }
                } else {
                    remainingDraws = dailyLimit;
                }
                
                remainingCount.textContent = remainingDraws;
            }
            
            // 保存抽奖记录
            function saveDrawHistory() {
                const today = new Date().toDateString();
                const drawHistory = JSON.parse(localStorage.getItem('drawHistory')) || {date: today, count: 0};
                
                if (drawHistory.date === today) {
                    drawHistory.count++;
                } else {
                    drawHistory.date = today;
                    drawHistory.count = 1;
                }
                
                localStorage.setItem('drawHistory', JSON.stringify(drawHistory));
                remainingDraws = dailyLimit - drawHistory.count;
                remainingCount.textContent = remainingDraws;
                
                if (remainingDraws <= 0) {
                    drawButton.disabled = true;
                    limitWarning.style.display = 'block';
                }
            }
            
            // 保存抽奖动作
            function saveDrawAction(prize) {
                const actions = JSON.parse(localStorage.getItem('sdy_actions')) || [];
                actions.push({
                    action: '抽奖',
                    details: `奖品: ${prize.name}`,
                    timestamp: new Date().toISOString(),
                    ip: '192.168.1.1', // 实际应获取用户IP（这里简化）
                    device: navigator.userAgent
                });
                localStorage.setItem('sdy_actions', JSON.stringify(actions));
            }
            
            // 页面加载时初始化
            renderPrizes();
            initVIP();
            loadDrawHistory();
            
            // 更新参与人数
            participantsCount.textContent = participants.toLocaleString();
            
            // VIP徽章点击事件
            vipBadge.addEventListener('click', showVipAccount);
            
            // 抽奖功能
            drawButton.addEventListener('click', function() {
                if (remainingDraws <= 0) {
                    showAlert('fail', '抽奖失败', '今日抽奖次数已达上限！');
                    return;
                }
                
                // 禁用按钮
                drawButton.disabled = true;
                
                // 显示加载动画
                spinner.style.display = 'block';
                resultPlaceholder.style.display = 'none';
                resultContent.style.display = 'none';
                
                // 增加参与人数
                participants++;
                participantsCount.textContent = participants.toLocaleString();
                
                // 模拟抽奖过程
                setTimeout(() => {
                    const randomNum = Math.random() * totalProbability;
                    let cumulativeProbability = 0;
                    let selectedPrize = null;
                    
                    // 根据概率选择奖品
                    for (const prize of prizes) {
                        cumulativeProbability += prize.probability;
                        if (randomNum <= cumulativeProbability) {
                            selectedPrize = prize;
                            break;
                        }
                    }
                    
                    // 确保有奖品被选中
                    if (!selectedPrize) {
                        selectedPrize = prizes[prizes.length - 1];
                    }
                    
                    // 显示结果
                    showResult(selectedPrize);
                    
                    // 保存抽奖记录
                    saveDrawHistory();
                    saveDrawAction(selectedPrize);
                    
                    // 启用按钮（如果还有次数）
                    if (remainingDraws > 0) {
                        drawButton.disabled = false;
                    }
                }, 1500);
            });
            
            function showResult(prize) {
                spinner.style.display = 'none';
                
                prizeName.textContent = prize.name;
                prizeDesc.textContent = prize.desc;
                
                const iconElement = document.querySelector('.prize-icon');
                iconElement.textContent = prize.icon;
                
                resultContent.style.display = 'flex';
                
                // 添加动画效果
                resultContent.style.animation = 'none';
                setTimeout(() => {
                    resultContent.style.animation = 'fadeIn 0.5s ease';
                }, 10);
                
                // 特殊奖品特效
                if (prize.name === "云电脑") {
                    prizeName.style.color = "#e91e63";
                    prizeName.style.fontWeight = "bold";
                    prizeName.style.textShadow = "0 0 10px rgba(233, 30, 99, 0.5)";
                    iconElement.style.color = "#e91e63";
                    iconElement.style.animation = "pulse 1.5s infinite";
                    
                    // 添加烟花效果
                    createFireworks();
                } else {
                    prizeName.style.color = "#1a73e8";
                    prizeName.style.fontWeight = "500";
                    prizeName.style.textShadow = "none";
                    iconElement.style.color = "#1a73e8";
                    iconElement.style.animation = "none";
                }
                
                // 显示中奖提示
                if (prize.name !== "谢谢参与") {
                    showAlert('success', '恭喜中奖！', `您获得了：${prize.name}`);
                } else {
                    showAlert('fail', '很遗憾', '本次未中奖，下次好运！');
                }
            }
            
            // 创建烟花效果（云电脑中奖时）
            function createFireworks() {
                const container = document.querySelector('.result-container');
                for (let i = 0; i < 20; i++) {
                    const firework = document.createElement('div');
                    firework.style.position = 'absolute';
                    firework.style.width = '6px';
                    firework.style.height = '6px';
                    firework.style.borderRadius = '50%';
                    firework.style.backgroundColor = getRandomColor();
                    firework.style.animation = `firework 1.5s ease-out forwards`;
                    firework.style.top = '50%';
                    firework.style.left = '50%';
                    firework.style.opacity = '0';
                    firework.style.zIndex = '10';
                    
                    // 随机位置
                    const angle = Math.random() * Math.PI * 2;
                    const distance = 80 + Math.random() * 60;
                    const x = Math.cos(angle) * distance;
                    const y = Math.sin(angle) * distance;
                    
                    firework.style.setProperty('--x', `${x}px`);
                    firework.style.setProperty('--y', `${y}px`);
                    
                    container.appendChild(firework);
                    
                    // 自动移除
                    setTimeout(() => {
                        firework.remove();
                    }, 1500);
                }
                
                // 添加CSS动画
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes firework {
                        0% {
                            transform: translate(0, 0);
                            opacity: 1;
                        }
                        100% {
                            transform: translate(var(--x), var(--y));
                            opacity: 0;
                        }
                    }
                    @keyframes pulse {
                        0% { transform: scale(1); }
                        50% { transform: scale(1.2); }
                        100% { transform: scale(1); }
                    }
                `;
                document.head.appendChild(style);
            }
            
            function getRandomColor() {
                const colors = ['#FF5252', '#FF4081', '#E040FB', '#7C4DFF', '#536DFE', '#448AFF', '#40C4FF', '#18FFFF', '#64FFDA', '#69F0AE'];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            // 卡密兑换功能
            cardKeyBtn.addEventListener('click', openCardModal);
            closeModalBtn.addEventListener('click', closeCardModal);
            submitCard.addEventListener('click', redeemCard);
            closeAccountModalBtn.addEventListener('click', closeVipAccount);
            
            // 点击模态框外部关闭
            cardModal.addEventListener('click', function(e) {
                if (e.target === cardModal) {
                    closeCardModal();
                }
            });
            
            vipAccountModal.addEventListener('click', function(e) {
                if (e.target === vipAccountModal) {
                    closeVipAccount();
                }
            });
        });
    </script>
</body>
</html>
